#:kivy 2.3.0


<CustomContentToggleButton>
    group: "content_button"
    font_size: "32sp"


<Start_Menu>:
    name: "start_menu"
    
    # IDs
    main_layout: main_layout
    content_layout: content_layout
    info_button: info_button
    #settings_button: settings_button

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: "10dp"
        padding: "5dp"

        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: "3dp"
    
            Button:
                size_hint_x: 1
                id: info_button
                font_size: "32sp"
                on_release:
                    app.root.current = "info_screen"
                    root.manager.transition.direction = "left"
                    root.update_info_text()

            Label:  # placeholder
                size_hint_x: 5

            #Button:
            #    id: settings_button
            #    font_size: "32sp"
            #    size_hint: None, None
            #    size: "150dp", "100dp"
            #    pos_hint: {'right': 1, 'top': 1}
            #    on_release:
            #        app.root.current = "settings_screen"
            #        root.manager.transition.direction = "left"
        
        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: 2
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
        
        # CONTENT
        BoxLayout:
            size_hint_y: 9
            id: main_layout
            orientation: "vertical"
            spacing: "3dp"

            BoxLayout:
                id: content_layout
                size_hint_y: 8
                orientation: "vertical"
                spacing: "3dp"
            

<Info_Screen>:
    name: "info_screen"

    # IDs
    about_label: about_label
    info_text_label: info_text_label

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: "10dp"
        padding: "5dp"

        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: "3dp"

            Button:
                size_hint_x: 1
                text: "<"
                font_size: "32sp"
                on_release:
                    app.root.current = "start_menu"
                    root.manager.transition.direction = "right"
            
            Label:  # placeholder
                size_hint_x: 5
    
        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: 2
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

        Label:
            id: about_label
            size_hint_y: 2

        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: 2
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

        ScrollView:
            id: question_scrollview
            size_hint_y: 7
            pos_hint: {'center_x': 0.5}

            Label:
                id: info_text_label
                font_size: "15sp"
                halign: "left"
                valign: "top"
                size_hint_y: None
                text_size: self.width, None
                height: self.texture_size[1]
                markup: True


#<Settings_Screen>:
#    name: "settings_screen"
#
#    text_output: text_output
#    default_content_label: default_content_label
#    default_content_switch: default_content_switch
#    select_file_button: select_file_button
#    upload_confirm_button: upload_confirm_button
#
#    Button:
#        text: "<"
#        font_size: "32sp"
#        size_hint: None, None
#        size: "75dp", "75dp"
#        pos_hint: {'left': 1, 'top': 1}
#        on_release:
#            app.root.current = "start_menu"
#            root.manager.transition.direction = "right"
#    
#    BoxLayout:
#        orientation: 'vertical'
#
#        Label:  # placeholder
#            size_hint: 1, 1
#
#        BoxLayout:
#            orientation: 'horizontal'
#
#            Label:
#                id: default_content_label
#                font_size: "32sp"
#            
#            Switch:
#                id: default_content_switch
#                #active: True
#                #disabled: True
#                on_active: root.update_default_content_switch(self, self.active)
#
#        Button:
#            id: select_file_button
#            font_size: "32sp"
#            size_hint: 1, 1
#            on_release: root.show_load()
#
#        Button:
#            id: upload_confirm_button
#            font_size: "32sp"
#            disabled: True
#            on_release: 
#            size_hint: 1, 1
#            on_release:
#                root.confirm_upload()
#        
#        Label:  # placeholder
#            size_hint: 1, 0.1
#
#        Label:
#            id: text_output
#            text: ""
#            font_size: "23sp"
#            text_size: self.size
#            valign: "top"
#            halign: "left"
#            show_errors: True
#            markup: True
#            size_hint: 1, 6


<LoadDialog>:
    # IDs
    cancel_button: cancel_button
    load_button: load_button

    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"

        FileChooserListView:
            id: filechooser
            filters: ['*.yaml', '*.yml']
            size_hint: 1, 6
            on_selection: root.on_selection(self, self.selection)

        BoxLayout:
            size_hint: 1, 1

            Button:
                id: cancel_button
                font_size: "32sp"
                on_release: 
                    root.cancel()

            Button:
                id: load_button
                font_size: "32sp"
                on_release:
                    root.load(filechooser.path, filechooser.selection)


<Fahrzeugkunde_Menu>:
    name: "fahrzeugkunde_menu"

    # IDs
    mode_label: mode_label
    firetrucks_layout: firetrucks_layout

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: "10dp"
        padding: "5dp"
    
        # HEADER
        BoxLayout:
            size_hint_y: 1
            orientation: 'horizontal'

            Button:
                size_hint_x: 1
                text: "<"
                font_size: "32sp"
                on_release:
                    app.root.current = "start_menu"
                    root.manager.transition.direction = "right"
            
            Label:
                size_hint_x: 5
                id: mode_label
                font_size: "20sp"
                halign: "center"
                valign: "middle"
                text_size: self.size
        
        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: 2
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

        # FIRETRUCKS
        ScrollView:
            size_hint_y: 9
            
            BoxLayout:
                id: firetrucks_layout
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                spacing: "5dp"


<Bewerb_Menu>:
    name: "bewerb_menu"

    # IDs
    mode_label: mode_label
    bewerbe_layout: bewerbe_layout

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: "10dp"
        padding: "5dp"
    
        # HEADER
        BoxLayout:
            size_hint_y: 1
            orientation: 'horizontal'

            Button:
                size_hint_x: 1
                text: "<"
                font_size: "32sp"
                on_release:
                    app.root.current = "start_menu"
                    root.manager.transition.direction = "right"

            Label:
                size_hint_x: 5
                id: mode_label
                font_size: "20sp"
                halign: "center"
                valign: "middle"
                text_size: self.size

        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: 2
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
        
        # COMPETITIONS
        ScrollView:
            size_hint_y: 9

            BoxLayout:
                id: bewerbe_layout
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                spacing: "5dp"


<Fahrzeugkunde_Training>:
    name: "fahrzeugkunde_training"

    # IDs
    firetruck_label: firetruck_label
    strike_label: strike_label
    high_strike_label: high_strike_label
    #tool_label: tool_label
    tool_image_layout: tool_image_layout
    #image_box_question: image_box_question
    #image_box_answer: image_box_answer
    firetruck_rooms_layout: firetruck_rooms_layout

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: "10dp"
        padding: "5dp"

        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: "3dp"

            Button:
                size_hint_x: 1
                text: "<"
                font_size: "32sp"
                on_release:
                    app.root.current = "fahrzeugkunde_menu"
                    root.manager.transition.direction = "right"
    
            Label:
                size_hint_x: 2
                id: firetruck_label
                font_size: "20sp"
                halign: "left"
                valign: "middle"
                text_size: self.size
            
            Label:  # placeholder
                size_hint_x: 1
            
            BoxLayout:
                size_hint_x: 2
                orientation: 'vertical'

                Label:
                    size_hint_y: 1
                    id: high_strike_label
                    font_size: "20sp"
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

                Label:
                    size_hint_y: 1
                    id: strike_label
                    font_size: "25sp"
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: 2
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

        # TOOL / IMAGE / ANSWER
        BoxLayout:
            size_hint_y: 4
            orientation: 'vertical'
            id: tool_image_layout

            # either tool-label + tool-image
            # or answer image
                
        # FIRETRUCK ROOMS
        #GridLayout:
        #    size_hint_y: 4
        #    id: firetruck_rooms_layout
        #    spacing: "3dp"
        #    cols: 2
        BoxLayout:
            size_hint_y: 4
            id: firetruck_rooms_layout
            # either GridLayout or FloatLayout
            

<Fahrzeugkunde_Game>:
    name: "fahrzeugkunde_game"

    # IDs
    firetruck_label: firetruck_label
    extra_time_label: extra_time_label
    score_label: score_label
    high_score_label: high_score_label
    tool_label: tool_label
    firetruck_rooms_layout: firetruck_rooms_layout
    progress_bar: progress_bar
    
    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: "10dp"
        padding: "5dp"
    
        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: "3dp"
            
            Button:
                size_hint_x: 1
                text: "<"
                font_size: "32sp"
                on_release:
                    root.manager.get_screen('fahrzeugkunde_game').end_game()

            Label:
                size_hint_x: 2
                id: firetruck_label
                font_size: "20sp"
                halign: "left"
                valign: "middle"
                text_size: self.size
            
            Label:
                size_hint_x: 1
                id: extra_time_label
                font_size: "20sp"
                halign: "center"
                valign: "middle"
                text_size: self.size
                color: (0,1,0,1)
            
            BoxLayout:
                size_hint_x: 2
                orientation: 'vertical'

                Label:
                    size_hint_y: 1
                    id: high_score_label
                    font_size: "20sp"
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

                Label:
                    size_hint_y: 1
                    id: score_label
                    font_size: "25sp"
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

        # SEPARATOR == PROGRESSBAR
        ProgressBar:
            size_hint_y: None
            height: 2
            id: progress_bar
        
        # TOOL
        Label:
            size_hint_y: 1
            id: tool_label
            font_size: "28sp"


        ###
        # IMAGE
        BoxLayout:
            size_hint_y: 1
            id: image_box_question
            #padding: [0, "20dp", 0, 0]
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0  # transparent, or change as needed
                Rectangle:
                    pos: self.pos
                    size: self.size
        ###

        # FIRETRUCK ROOMS
        GridLayout:
            size_hint_y: 6
            id: firetruck_rooms_layout
            spacing: "3dp"
            cols: 2
        

<Label_List>:
    name: label_list
    orientation: 'vertical'
    size_hint_y: None
    height: self.minimum_height


<Fahrzeugkunde_Browse>:
    name: "fahrzeugkunde_browse"

    # IDs
    firetruck_label: firetruck_label
    browse_scrollview: browse_scrollview
    filter_text: filter_text
    filter_button: filter_button

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: "10dp"
        padding: "5dp"
    
        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: "3dp"
            
            Button:
                size_hint_x: 1
                text: "<"
                font_size: "32sp"
                on_release:
                    app.root.current = "fahrzeugkunde_menu"
                    root.manager.transition.direction = "right"
    
            Label:
                size_hint_x: 5
                id: firetruck_label
                font_size: "20sp"
                halign: "left"
                valign: "middle"
                text_size: self.size
            
        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: 2
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

        # INPUT
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 1
            
            Button:
                size_hint_x: 1
                id: filter_button
                font_size: "32sp"
                on_release:
                    root.manager.get_screen('fahrzeugkunde_browse').filter_list()

            TextInput:
                size_hint_x: 4
                id: filter_text
                pos_hint: {'center_x': 0.5}
                text_size: self.width, None
                font_size: "25sp"
                multiline: False
            
            Button:
                size_hint_x: 1
                text:  "X"
                font_size: "32sp"
                on_release:
                    root.manager.get_screen('fahrzeugkunde_browse').remove_filter_text()

        # TOOL-LIST
        ScrollView:
            size_hint_y: 8
            id: browse_scrollview
            pos_hint: {'center_x': 0.5}
            BoxLayout:
                id: label_list
                orientation: 'vertical'
                size_hint_y: None
                size_hint_x: None
                width: 1300
                height: self.minimum_height


<Fahrzeugkunde_Images>:
    name: "fahrzeugkunde_images"
    firetruck_label: firetruck_label
    # firetruck_rooms_layout: firetruck_rooms_layout
    scatter: scatter

    Button:
        text: "<"
        font_size: "32sp"
        size_hint: None, None
        size: "75dp", "75dp"
        pos_hint: {'left': 1, 'top': 1}
        on_release:
            app.root.current = "fahrzeugkunde_menu"
            root.manager.transition.direction = "right"
    
    BoxLayout:
        orientation: 'vertical'
        
        Label:
            id: firetruck_label
            text: "Bilder"
            font_size: "20sp"
            # pos_hint: {'center': 1, 'top': 1}
            text_size: self.width, None
            # halign: "left"
            # size_hint: 0.5, 0.1

        FloatLayout:
            # size_hint: 1, 0.8

            Scatter:
                id: scatter
                # size_hint: 1, 0.8
                do_rotation: False

        GridLayout:
            # size_hint: 1, 0.1
            spacing: "3dp"
            cols: 2
    
            Button:
                text: "<"
                id: previous_image_button
                font_size: "45sp"
                disabled: True
                # on_release:
                #     root.manager.get_screen('fahrzeugkunde_images').load_image()

            Button:
                text: ">"
                id: next_image_button
                font_size: "45sp"
                on_release:
                    root.manager.get_screen('fahrzeugkunde_images').load_image()


<Bewerb_Training>:
    name: "bewerb_training"

    # IDs
    question_id_label: question_id_label
    question_scrollview: question_scrollview
    question_label: question_label
    solution_button: solution_button
    random_question_button: random_question_button
    previous_question_button: previous_question_button
    next_question_button: next_question_button

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: "10dp"
        padding: "5dp"

        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: "3dp"

            Button:
                size_hint_x: 1
                text: "<"
                font_size: "32sp"
                on_release:
                    app.root.current = "bewerb_menu"
                    root.manager.transition.direction = "right"

            Label:  # placeholder
                size_hint_x: 2

            Label:
                size_hint_x: 3
                id: question_id_label
                font_size: "32sp"
                halign: "right"
                valign: "middle"
                text_size: self.size

        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: 2
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
        
        # QUESTION
        ScrollView:
            size_hint_y: 7
            id: question_scrollview

            Label:
                id: question_label
                font_size: "32sp"
                halign: "left"
                valign: "top"
                size_hint_y: None
                text_size: self.width, None
                height: self.texture_size[1]
                markup: True

        # NAVIGATION
        BoxLayout:
            size_hint_y: 1
            spacing: "5dp"
    
            Button:
                size_hint_x: 1
                text: "<"
                id: previous_question_button
                font_size: "45sp"
                on_release:
                    root.manager.get_screen('bewerb_training').next_question(previous=True)

            Button:
                size_hint_x: 1
                text: ">"
                id: next_question_button
                font_size: "45sp"
                on_release:
                    root.manager.get_screen('bewerb_training').next_question()
        
        # ANSWER
        BoxLayout:
            size_hint_y: 1
            spacing: "3dp"

            Button:
                size_hint_x: 1
                id: random_question_button
                font_size: "32sp"
                on_release:
                    root.manager.get_screen('bewerb_training').random_question()
        
            Button:
                size_hint_x: 1
                id: solution_button
                font_size: "32sp"
                on_release:
                    root.manager.get_screen('bewerb_training').reveal_answer()
            

<Bewerb_Game>:
    name: "bewerb_game"

    # IDs
    competition_label: competition_label
    score_label: score_label
    high_score_label: high_score_label
    extra_time_label: extra_time_label
    progress_bar: progress_bar
    question_id_label: question_id_label
    question_scrollview: question_scrollview
    question_label: question_label
    answer_buttons_layout: answer_buttons_layout

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: "10dp"
        padding: "5dp"

        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: "3dp"

            Button:
                size_hint_x: 1
                text: "<"
                font_size: "32sp"
                on_release:
                    root.manager.get_screen('bewerb_game').end_game()

            BoxLayout:
                size_hint_x: 2
                orientation: 'vertical'

                Label:
                    size_hint_y: 1
                    id: competition_label
                    font_size: "20sp"
                    halign: "left"
                    valign: "middle"
                    text_size: self.size

                Label:
                    size_hint_y: 1
                    id: question_id_label
                    font_size: "20sp"
                    halign: "left"
                    valign: "middle"
                    text_size: self.size
    
            Label:
                size_hint_x: 1
                id: extra_time_label
                font_size: "20sp"
                halign: "center"
                valign: "middle"
                text_size: self.size
                color: (0,1,0,1)

            BoxLayout:
                size_hint_x: 2
                orientation: 'vertical'

                Label:
                    size_hint_y: 1
                    id: high_score_label
                    font_size: "20sp"
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

                Label:
                    size_hint_y: 1
                    id: score_label
                    font_size: "25sp"
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

        # SEPARATOR == PROGRESSBAR
        ProgressBar:
            size_hint_y: None
            height: 2
            id: progress_bar

        # QUESTION        
        ScrollView:
            id: question_scrollview
            size_hint_y: 8

            Label:
                id: question_label
                font_size: "25sp"
                halign: "left"
                valign: "top"
                size_hint_y: None
                text_size: self.width, None
                height: self.texture_size[1]
                markup: True
        
        # ANSWER
        GridLayout:
            size_hint_y: 1
            id: answer_buttons_layout
            spacing: "3dp"
            cols: 4
