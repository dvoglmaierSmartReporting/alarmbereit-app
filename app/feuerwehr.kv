#:kivy 2.3.0


<CustomToggleButton>
    group: "mode"
    font_size: "32sp"


<StartMenu>:
    name: "startmenu"

    mode_label: mode_label
    training_button: training_button
    game_button: game_button
    browse_button: browse_button
    images_button: images_button

    questions_label: questions_label
    firetrucks_button: firetrucks_button
    competition_button: competition_button

    BoxLayout:
        orientation: "vertical"
        spacing: "3dp"

        Label:
            id: mode_label
            bold: True
            font_size: "32sp"
            size_hint: 1, 0.5
        
        GridLayout:
            size_hint: 1, 2
            cols: 2
            spacing: "3dp"

            CustomToggleButton:
                id: training_button
                state: "down"
                on_release: root.on_button_release()

            CustomToggleButton:
                id: game_button
                on_release: root.on_button_release()
            
            CustomToggleButton:
                id: browse_button
                on_release: root.on_button_release()

            CustomToggleButton:
                id: images_button
                on_release: root.on_button_release()
        
        Label:
            id: questions_label
            bold: True
            font_size: "32sp"
            size_hint: 1, 0.5
        
        Button:
            id: firetrucks_button
            text: "Fahrzeugkunde"
            font_size: "32sp"
            on_release:
                app.root.current = "fahrzeugkundemenu"
                root.manager.transition.direction = "left"
                root.forward_mode2menu("fahrzeugkundemenu")

        Button:
            id: competition_button
            text: "Bewerb"
            font_size: "32sp"
            on_release:
                app.root.current = "bewerbmenu"
                root.manager.transition.direction = "left"
                root.forward_mode2menu("bewerbmenu")


<FahrzeugkundeMenu>:
    name: "fahrzeugkundemenu"
    mode_label: mode_label
    firetrucks_layout: firetrucks_layout

    Button:
        text: "<"
        font_size: "32sp"
        size_hint: None, None
        size: "50dp", "50dp"
        pos_hint: {'left': 1, 'top': 1}
        on_release:
            app.root.current = "startmenu"
            root.manager.transition.direction = "right"

    Label:
        id: mode_label
        font_size: "20sp"
        size_hint: None, None
        size: "200dp", "50dp"
        halign: "right"
        text_size: self.width, None
        pos_hint: {'right': 1, 'top': 1}
    
    BoxLayout:
        id: firetrucks_layout
        size_hint: 1, 0.9
        orientation: 'vertical'
        spacing: "5dp"


<BewerbMenu>:
    name: "bewerbmenu"
    #orientation: "vertical"
    mode_label: mode_label
    bewerbe_layout: bewerbe_layout

    Button:
        text: "<"
        font_size: "32sp"
        size_hint: None, None
        size: "50dp", "50dp"
        pos_hint: {'left': 1, 'top': 1}
        on_release:
            app.root.current = "startmenu"
            root.manager.transition.direction = "right"
    Label:
        id: mode_label
        font_size: "20sp"
        size_hint: None, None
        size: "200dp", "50dp"
        halign: "right"
        text_size: self.width, None
        pos_hint: {'right': 1, 'top': 1}
    
    # BoxLayout:
    GridLayout:
    # Scroll
        id: bewerbe_layout
        size_hint: 1, 0.9
        #orientation: 'vertical'
        spacing: "5dp"
        cols: 1


<FahrzeugkundeTrainingGame>:
    name: "fahrzeugkunde_training_game"
    firetruck_label: firetruck_label
    strike_label: strike_label
    timer_label: timer_label
    timer_change_label: timer_change_label
    score_label: score_label
    tool_label: tool_label
    rooms_layout: rooms_layout

    Button:
        text: "<"
        font_size: "32sp"
        size_hint: None, None
        size: "50dp", "50dp"
        pos_hint: {'left': 1, 'top': 1}
        on_release:
            app.root.current = "fahrzeugkundemenu"
            root.manager.transition.direction = "right"
    
    Label:
        id: firetruck_label
        font_size: "20sp"
        pos_hint: {'left': 1, 'top': 1}
        text_size: self.width, None
        halign: "left"
        size_hint: 1, 0.25

    Label:
        id: strike_label
        font_size: "25sp"
        pos_hint: {'right': 1, 'top': 1}
        text_size: self.width, None
        halign: "right"
        size_hint: 1, 0.1
        opacity: 1 if self.parent.strike_label_visible else 0
    
    Label:
        id: timer_label
        font_size: "25sp"
        pos_hint: {'right': 1, 'top': 1}
        text_size: self.width, None
        halign: "right"
        size_hint: 1, 0.1
        opacity: 1 if self.parent.timer_label_visible else 0

    Label:
        id: timer_change_label
        text: '+ 3s  ' if self.parent.timer_change_add else '- 1s  '
        color: (0,1,0,1) if self.parent.timer_change_add else (1,0,0,1)
        font_size: "25sp"
        pos_hint: {'right': 1, 'top': 1}
        text_size: self.width, None
        halign: "right"
        size_hint: 1, 0.175
        opacity: 1 if self.parent.timer_change_label_visible else 0
    
    Label:
        id: score_label
        # text: '0  '
        font_size: "25sp"
        pos_hint: {'right': 1, 'top': 1}
        text_size: self.width, None
        halign: "right"
        size_hint: 1, 0.25
        opacity: 1 if self.parent.timer_label_visible else 0

    BoxLayout:
        orientation: 'vertical'

        Label:
            id: tool_label
            size_hint: 1, 0.15
            font_size: "28sp"

        GridLayout:
            id: rooms_layout
            size_hint: 1, 0.797
            spacing: "3dp"
            cols: 2


<Container>:
    orientation: 'vertical'
    size_hint_y: None
    height: self.minimum_height


<FahrzeugkundeBrowse>:
    name: "fahrzeugkunde_browse"
    firetruck_label: firetruck_label

    Button:
        text: "<"
        font_size: "32sp"
        size_hint: None, None
        size: "50dp", "50dp"
        pos_hint: {'left': 1, 'top': 1}
        on_release:
            app.root.current = "fahrzeugkundemenu"
            root.manager.transition.direction = "right"
    
    Label:
        id: firetruck_label
        font_size: "20sp"
        pos_hint: {'right': 1, 'top': 1}
        text_size: self.width, None
        halign: "right"
        size_hint: None, None
        size: "200dp", "50dp"
    
    BoxLayout:
        Widget:
            size_hint_y: 0
            size_hint_x: 0.15
        ScrollView:
            size_hint_y: 1
            size_hint_x: 0.85
            BoxLayout:
                id: container
                orientation: 'vertical'
                size_hint_y: None
                size_hint_x: None
                width: 1300
                height: self.minimum_height


<FahrzeugkundeImages>:
    name: "fahrzeugkunde_images"
    # firetruck_label: firetruck_label
    # tool_label: tool_label
    # rooms_layout: rooms_layout

    Button:
        text: "<"
        font_size: "32sp"
        size_hint: None, None
        size: "50dp", "50dp"
        pos_hint: {'left': 1, 'top': 1}
        on_release:
            app.root.current = "fahrzeugkundemenu"
            root.manager.transition.direction = "right"
    
    Label:
        # id: firetruck_label
        text: "Bilder"  # move to strings.py
        font_size: "20sp"
        pos_hint: {'left': 1, 'top': 1}
        text_size: self.width, None
        halign: "left"
        size_hint: 1, 0.25


<BewerbTraining>:
    name: "bewerbtraining"
    question_label: question_label
    question_id_label: question_id_label
    # answers_layout: answers_layout  # multiple-choice

    Button:
        text: "<"
        font_size: "32sp"
        size_hint: None, None
        size: "50dp", "50dp"
        pos_hint: {'left': 1, 'top': 1}
        on_release:
            app.root.current = "bewerbmenu"
            root.manager.transition.direction = "right"

    Label:
        id: question_id_label
        font_size: "32sp"
        halign: "right"
        size_hint: None, None
        size: "500dp", "50dp"
        text_size: self.width, None
        pos_hint: {'right': 1, 'top': 1}

    BoxLayout:
        orientation: 'vertical'

        Label:
            # placeholder
            size_hint: 1, 0.07
            text: ""

        Label:
            id: question_label
            #size_hint: 1, 0.425
            font_size: "35sp"

            #text_size: self.width, None
            text_size: self.size
            size_hint: 1, 0.78
            height: self.texture_size[1]
            valign: "top"
        
        GridLayout:
            id: rooms_layout
            size_hint: 1, 0.15
            spacing: "3dp"
            cols: 2
    
            Button:
                text: "Lösung"
                font_size: "32sp"
                on_release:
                    root.manager.get_screen('bewerbtraining').reveal_answer()
    
            Button:
                text: "Nächste"
                font_size: "32sp"
                on_release:
                    root.manager.get_screen('bewerbtraining').next_question()
        