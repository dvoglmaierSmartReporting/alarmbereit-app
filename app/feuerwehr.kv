#:kivy 2.3.1
#:import Window kivy.core.window.Window
#:import dp kivy.metrics.dp
#:import sp kivy.metrics.sp

<Login>:
    name: "login"

    # IDs
    logo_hallein_layout: logo_hallein_layout
    login_label: login_label
    login_layout: login_layout
    city_scrollview: city_scrollview
    city_layout: city_layout
    store_selection_button: store_selection_button

    # LOGO HALLEIN
    FloatLayout:
        id: logo_hallein_layout
    
    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        padding: dp(5)
        spacing: dp(10)

        # HEADER
        BoxLayout:
            size_hint_y: 2
            spacing: dp(3)

            Label: # placeholder
                size_hint_x: 4

            BoxLayout:
                size_hint_x: 2
                orientation: 'vertical'
                
                Label: # placeholder
                    size_hint_y: 1

                Label:
                    size_hint_y: 1
                    id: login_label
                    font_size: dp(21) * max(0.8, min(1.5, Window.width / dp(600)))
                    halign: "center"
                    valign: "middle"
                    text_size: self.size
            
        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: dp(2)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

        # LOGIN
        BoxLayout:
            id: login_layout
            orientation: 'vertical'
            size_hint_y: 6.5
            
            # CITY
            ScrollView:
                id: city_scrollview
                do_scroll_x: False
                
                BoxLayout:
                    orientation: 'vertical'
                    id: city_layout
                    size_hint_y: None
                    height: self.minimum_height
                    spacing: dp(5)
                
        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: dp(2)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

        # STORE SELECTION
        BoxLayout:
            size_hint_y: 1.5

            Button:
                id: store_selection_button
                font_size: dp(27) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.manager.get_screen('login').store_selection()


<Start_Menu>:
    name: "start_menu"
    
    # IDs
    logo_layout: logo_layout
    content_layout: content_layout
    score_button: score_button
    acknowledgement_button: acknowledgement_button
    all_cities_button: all_cities_button

    # LOGO
    FloatLayout:
        id: logo_layout

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        padding: dp(5)
        spacing: dp(10)

        # HEADER
        BoxLayout:
            size_hint_y: 2
            spacing: dp(3)

            # ACKNOWLEDGEMENT BUTTON
            Button:
                size_hint_x: 3
                id: acknowledgement_button
                background_normal: ''
                background_color: 0, 0, 0, 0
                on_release:
                    app.root.current = "acknowledgement_screen"
                    root.manager.transition.direction = "left"

            Label:  # placeholder
                size_hint_x: 1
            
            BoxLayout:
                size_hint_x: 2
                orientation: 'vertical'
                spacing: dp(15)
                padding: dp(15)

                # SCORE BUTTON
                Button:
                    size_hint_y: 1
                    id: score_button
                    font_size: sp(25) * max(0.8, min(1.5, Window.width / sp(600)))
                    background_normal: ''
                    background_color: 0.2, 0.2, 0.2, 0.5
                    on_release:
                        app.root.current = "highscore_screen"
                        root.manager.transition.direction = "left"

                # ALL CITIES BUTTON
                Button:
                    size_hint_y: 1
                    id: all_cities_button
                    font_size: sp(25) * max(0.8, min(1.5, Window.width / sp(600)))
                    background_normal: ''
                    background_color: 0.2, 0.2, 0.2, 0.5
                    on_release:
                        app.root.current = "login"
                        root.manager.transition.direction = "right"

        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: dp(2)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
        
        # CONTENT
        BoxLayout:
            id: content_layout
            size_hint_y: 7.5
            orientation: "vertical"
            spacing: dp(5)
        
        Label: # placeholder
            size_hint_y: 0.5


<Highscore>:
    name: "highscore_screen"

    # IDs
    city_label: city_label
    score_text_label: score_text_label

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: dp(10)
        padding: dp(5)

        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: dp(3)

            Button:
                size_hint_x: 1
                text: "<"
                font_size: dp(32) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.go_back()
            
            Label:
                size_hint_x: 5
                id: city_label
                font_size: dp(25) * max(0.8, min(1.5, Window.width / dp(600)))
                halign: "center"
                valign: "middle"
                text_size: self.size
    
        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: dp(2)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
        
        # SCORES
        ScrollView:
            size_hint_y: 9
            pos_hint: {'center_x': 0.5}

            Label:
                id: score_text_label
                font_size: dp(15) * max(0.8, min(1.5, Window.width / dp(600)))
                font_name: "CourierNew"
                halign: "left"
                valign: "top"
                size_hint_y: None
                text_size: self.width, None
                height: self.texture_size[1]
                markup: True
        

<Acknowledgment>:
    name: "acknowledgement_screen"

    # IDs
    header_label: header_label
    acknowledgement_label: acknowledgement_label

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: dp(10)
        padding: dp(5)

        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: dp(3)

            Button:
                size_hint_x: 1
                text: "<"
                font_size: dp(32) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.go_back()
            
            Label: # placeholder
                size_hint_x: 2

            Label:
                size_hint_x: 3
                id: header_label
                font_size: dp(25) * max(0.8, min(1.5, Window.width / dp(600)))
                halign: "center"
                valign: "middle"
                text_size: self.size
    
        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: dp(2)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
        
        # ACKNOWLEDGEMENT
        ScrollView:
            size_hint_y: 9
            pos_hint: {'center_x': 0.5}

            Label:
                id: acknowledgement_label
                font_size: dp(17) * max(0.8, min(1.5, Window.width / dp(600)))
                halign: "left"
                valign: "top"
                size_hint_y: None
                text_size: self.width, None
                height: self.texture_size[1]
                markup: True


<Firetruck_Mode>:
    name: "firetruck_mode"

    # IDs
    logo_layout: logo_layout
    modes_label: modes_label
    modes_layout: modes_layout

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        padding: dp(5)
        spacing: dp(10)

        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: dp(3)
            orientation: 'horizontal'

            Button:
                size_hint_x: 1
                text: "<"
                font_size: dp(32) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.go_back()
            
            # LOGO
            BoxLayout:
                id: logo_layout
                size_hint_x: 1
    
            Label:  # placeholder
                size_hint_x: 1
            
            Label:
                size_hint_x: 3
                id: modes_label
                font_size: dp(25) * max(0.8, min(1.5, Window.width / dp(600)))
                halign: "center"
                valign: "middle"
                text_size: self.size
            
        
        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: dp(2)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

        # MODES
        BoxLayout:
            id: modes_layout
            orientation: 'vertical'
            size_hint_y: 9


<Firetruck_Menu>:
    name: "firetruck_menu"

    # IDs
    logo_layout: logo_layout
    mode_label: mode_label
    firetrucks_scrollview: firetrucks_scrollview
    firetrucks_layout: firetrucks_layout

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: dp(10)
        padding: dp(5)
    
        # HEADER
        BoxLayout:
            size_hint_y: 1
            orientation: 'horizontal'
            spacing: dp(3)

            Button:
                size_hint_x: 1
                text: "<"
                font_size: dp(32) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.go_back()
            
            # LOGO
            BoxLayout:
                id: logo_layout
                size_hint_x: 1
    
            Label:  # placeholder
                size_hint_x: 1

            Label:
                size_hint_x: 3
                id: mode_label
                font_size: dp(25) * max(0.8, min(1.5, Window.width / dp(600)))
                halign: "center"
                valign: "middle"
                text_size: self.size
        
        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: dp(2)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

        # FIRETRUCKS
        ScrollView:
            size_hint_y: 9
            id: firetrucks_scrollview
            
            BoxLayout:
                id: firetrucks_layout
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(5)


<Firetruck_Training>:
    name: "firetruck_training"

    # IDs
    firetruck_label: firetruck_label
    score_label: score_label
    high_score_label: high_score_label
    tool_label: tool_label
    firetruck_rooms_layout: firetruck_rooms_layout

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: dp(10)
        padding: dp(5)

        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: dp(3)

            Button:
                size_hint_x: 1
                text: "<"
                font_size: dp(32) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.go_back()
    
            Label:
                size_hint_x: 2
                id: firetruck_label
                font_size: dp(20) * max(0.8, min(1.5, Window.width / dp(600)))
                halign: "left"
                valign: "middle"
                text_size: self.size
            
            Label:  # placeholder
                size_hint_x: 1
            
            BoxLayout:
                size_hint_x: 2
                orientation: 'vertical'

                Label:
                    size_hint_y: 1
                    id: high_score_label
                    font_size: dp(20) * max(0.8, min(1.5, Window.width / dp(600)))
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

                Label:
                    size_hint_y: 1
                    id: score_label
                    font_size: dp(25) * max(0.8, min(1.5, Window.width / dp(600)))
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: dp(2)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
            
            # TOOL
            Label:
                size_hint_y: 3
                id: tool_label
                font_size: dp(28) * max(0.8, min(1.5, Window.width / dp(600)))
                    
            # FIRETRUCK ROOMS
            BoxLayout:
                size_hint_y: 6
                id: firetruck_rooms_layout


<Firetruck_Training_With_Images>:
    name: "firetruck_training_with_images"

    # IDs
    firetruck_label: firetruck_label
    score_label: score_label
    high_score_label: high_score_label
    progress_bar_answer: progress_bar_answer
    root_layer: root_layer
    tool_image_layout: tool_image_layout
    firetruck_rooms_layout: firetruck_rooms_layout

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: dp(10)
        padding: dp(5)

        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: dp(3)

            Button:
                size_hint_x: 1
                text: "<"
                font_size: dp(32) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.go_back()
    
            Label:
                size_hint_x: 2
                id: firetruck_label
                font_size: dp(20) * max(0.8, min(1.5, Window.width / dp(600)))
                halign: "left"
                valign: "middle"
                text_size: self.size
            
            Label:  # placeholder
                size_hint_x: 1
            
            BoxLayout:
                size_hint_x: 2
                orientation: 'vertical'

                Label:
                    size_hint_y: 1
                    id: high_score_label
                    font_size: dp(20) * max(0.8, min(1.5, Window.width / dp(600)))
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

                Label:
                    size_hint_y: 1
                    id: score_label
                    font_size: dp(25) * max(0.8, min(1.5, Window.width / dp(600)))
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

        # SEPARATOR
        ProgressBar:
            size_hint_y: 0.1
            id: progress_bar_answer
        
        # parent layer that can host overlays
        FloatLayout:
            id: root_layer
            size_hint_y: 9

            BoxLayout:
                orientation: 'vertical'
                size_hint: 1, 1

                # TOOL / IMAGE / ANSWER
                BoxLayout:
                    id: tool_image_layout
                    orientation: 'vertical'

                # FIRETRUCK ROOMS
                BoxLayout:
                    id: firetruck_rooms_layout


<Firetruck_Game>:
    name: "firetruck_game"

    # IDs
    firetruck_label: firetruck_label
    extra_time_label: extra_time_label
    score_label: score_label
    high_score_label: high_score_label
    tool_label: tool_label
    firetruck_rooms_layout: firetruck_rooms_layout
    progress_bar: progress_bar
    
    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: dp(10)
        padding: dp(5)
    
        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: dp(3)
            
            Button:
                size_hint_x: 1
                text: "<"
                font_size: dp(32) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.manager.get_screen('firetruck_game').end_game()

            Label:
                size_hint_x: 2
                id: firetruck_label
                font_size: dp(20) * max(0.8, min(1.5, Window.width / dp(600)))
                halign: "left"
                valign: "middle"
                text_size: self.size
            
            Label:
                size_hint_x: 1
                id: extra_time_label
                font_size: dp(20) * max(0.8, min(1.5, Window.width / dp(600)))
                halign: "center"
                valign: "middle"
                text_size: self.size
                color: (0,1,0,1)
            
            BoxLayout:
                size_hint_x: 2
                orientation: 'vertical'

                Label:
                    size_hint_y: 1
                    id: high_score_label
                    font_size: dp(20) * max(0.8, min(1.5, Window.width / dp(600)))
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

                Label:
                    size_hint_y: 1
                    id: score_label
                    font_size: dp(25) * max(0.8, min(1.5, Window.width / dp(600)))
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

        # SEPARATOR == PROGRESSBAR
        ProgressBar:
            size_hint_y: None
            height: dp(2)
            id: progress_bar
        
            # TOOL
            Label:
                size_hint_y: 2
                id: tool_label
                font_size: dp(28) * max(0.8, min(1.5, Window.width / dp(600)))

            # FIRETRUCK ROOMS
            GridLayout:
                size_hint_y: 7
                id: firetruck_rooms_layout
                spacing: dp(3)
                cols: 2


<Firetruck_Exam>:
    name: "firetruck_exam"

    # IDs
    firetruck_label: firetruck_label
    score_label: score_label
    high_score_label: high_score_label
    tool_label: tool_label
    firetruck_rooms_layout: firetruck_rooms_layout

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        spacing: dp(10)
        padding: dp(5)

        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: dp(3)

            Button:
                size_hint_x: 1
                text: "<"
                font_size: dp(32) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.go_back()
    
            Label:
                size_hint_x: 2
                id: firetruck_label
                font_size: dp(20) * max(0.8, min(1.5, Window.width / dp(600)))
                halign: "left"
                valign: "middle"
                text_size: self.size
            
            Label:  # placeholder
                size_hint_x: 1
            
            BoxLayout:
                size_hint_x: 2
                orientation: 'vertical'

                Label:
                    size_hint_y: 1
                    id: high_score_label
                    font_size: dp(20) * max(0.8, min(1.5, Window.width / dp(600)))
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

                Label:
                    size_hint_y: 1
                    id: score_label
                    font_size: dp(25) * max(0.8, min(1.5, Window.width / dp(600)))
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: dp(2)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
            
            # TOOL
            Label:
                size_hint_y: 3
                id: tool_label
                font_size: dp(28) * max(0.8, min(1.5, Window.width / dp(600)))
                    
            # FIRETRUCK ROOMS
            BoxLayout:
                size_hint_y: 6
                id: firetruck_rooms_layout
                # either GridLayout or FloatLayout


<Label_List>:
    name: label_list
    orientation: 'vertical'
    size_hint_y: None
    height: self.minimum_height


<Firetruck_Browse>:
    name: "firetruck_browse"

    # IDs
    firetruck_label: firetruck_label
    browse_scrollview: browse_scrollview
    filter_text: filter_text
    filter_button: filter_button

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        padding: dp(5)
        spacing: dp(10)
    
        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: dp(3)
            
            Button:
                size_hint_x: 1
                text: "<"
                font_size: dp(32) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.go_back()
    
            Label: # placeholder
                size_hint_x: 2

            Label:
                size_hint_x: 3
                id: firetruck_label
                font_size: dp(25) * max(0.8, min(1.5, Window.width / dp(600)))
                halign: "left"
                valign: "middle"
                text_size: self.size
            
        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: dp(2)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

        # INPUT
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 1
            
            Button:
                size_hint_x: 1
                id: filter_button
                font_size: dp(32) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.manager.get_screen('firetruck_browse').filter_list()

            TextInput:
                size_hint_x: 4
                id: filter_text
                pos_hint: {'center_x': 0.5}
                text_size: self.width, None
                font_size: dp(25) * max(0.8, min(1.5, Window.width / dp(600)))
                multiline: False
            
            Button:
                size_hint_x: 1
                text:  "X"
                font_size: dp(32) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.manager.get_screen('firetruck_browse').remove_filter_text()

        # TOOL-LIST
        ScrollView:
            size_hint_y: 8
            id: browse_scrollview
            pos_hint: {'center_x': 0.5}
            BoxLayout:
                id: label_list
                orientation: 'vertical'
                size_hint_y: None
                size_hint_x: None
                width: 1300
                height: self.minimum_height


<Firetruck_Images>:
    name: "firetruck_images"

    # IDs
    firetruck_label: firetruck_label
    scroll_container: scroll_container

    # SCREEN
    BoxLayout:
        orientation: 'vertical'
        padding: dp(5)
        spacing: dp(10)

        # HEADER
        BoxLayout:
            size_hint_y: 1
            spacing: dp(3)

            Button:
                size_hint_x: 1
                text: "<"
                font_size: dp(32) * max(0.8, min(1.5, Window.width / dp(600)))
                on_release:
                    root.go_back()
            
            Label: # placeholder
                size_hint_x: 2
            
            Label:
                size_hint_x: 3
                id: firetruck_label
                font_size: dp(25) * max(0.8, min(1.5, Window.width / dp(600)))
                halign: "left"
                valign: "middle"
                text_size: self.size
    
        # SEPARATOR
        BoxLayout:
            size_hint_y: None
            height: dp(2)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

        # IMAGES
        ScrollView:
            size_hint_y: 9
            
            BoxLayout:
                id: scroll_container
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
